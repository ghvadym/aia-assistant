(function(i){i(document).ready(function(){const r=aiajax.ajaxurl;aiajax.nonce,i(".aia_form__submit").length&&i(document).on("click",".aia_form__submit",function(){const t=i(this),a=i(t).closest(".aia"),e=i(a).find(".aia__response"),o=i(a).find(".aia__error");if(!c(a))return l("#aia-fields"),!1;jQuery.ajax({type:"POST",url:r,data:{action:"ai_prompt",id:i(t).data("id"),type:i(t).data("type"),topic:i(a).find("#aia-topic").val(),keywords:i(a).find("#aia-keywords").val(),voice:i(a).find("#aia-tone-voice").val(),words:i(a).find("#aia-words-count").val(),lang:i(a).find("#aia-language option:selected").val(),point_of_view:i(a).find("#aia-point-of-view option:selected").val()},beforeSend:function(){i(a).addClass("_spinner")},success:function(n){n.success&&n.answer&&(i(e).html(n.answer),i(o).empty()),n.error&&n.message&&(i(e).empty(),i(o).html(n.message)),i(a).removeClass("_spinner")},error:function(n){console.log("error",n)}})});function c(t){if(!t)return;let a=0;const e=i(t).find("input, select"),o=["aia-topic"];return e?(i(e).each(function(n,f){const s=i(this).attr("name");i(this).val()?jQuery.inArray(s,o)!==-1&&i(this).removeClass("not_valid"):jQuery.inArray(s,o)!==-1&&(i(this).addClass("not_valid"),a++)}),!a):!1}function l(t){t&&i([document.documentElement,document.body]).animate({scrollTop:i(t).offset().top},500)}})})(jQuery);

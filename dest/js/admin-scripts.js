(function(a){a(document).ready(function(){const l=aiajax.ajaxurl;aiajax.nonce,a(".aia_form__submit").length&&a(document).on("click",".aia_form__submit",function(){const i=a(this),e=a(i).closest(".aia"),s=a(e).find(".aia__response"),t=a(e).find(".aia__content"),c=a(e).find(".aia__error");if(!d(e))return f("#aia-fields"),!1;jQuery.ajax({type:"POST",url:l,data:{action:"ai_prompt",id:a(i).data("id"),type:a(i).data("type"),topic:a(e).find("#aia-topic").val(),keywords:a(e).find("#aia-keywords").val(),voice:a(e).find("#aia-tone-voice").val(),words:a(e).find("#aia-words-count").val(),lang:a(e).find("#aia-language option:selected").val(),point_of_view:a(e).find("#aia-point-of-view option:selected").val()},beforeSend:function(){a(e).addClass("aia_spinner")},success:function(n){n.success&&n.answer&&(a(s).html(n.answer),a(t).addClass("active"),a(t).removeClass("issue"),a(c).empty()),n.error&&n.message&&(a(s).empty(),a(c).html(n.message),a(t).removeClass("active"),a(t).addClass("issue")),a(e).removeClass("aia_spinner")},error:function(n){console.log("error",n)}})});function d(i){if(!i)return;let e=0;const s=a(i).find("input, select"),t=["aia-topic"];return s?(a(s).each(function(c,n){const r=a(this).attr("name");a(this).val()?jQuery.inArray(r,t)!==-1&&a(this).removeClass("not_valid"):jQuery.inArray(r,t)!==-1&&(a(this).addClass("not_valid"),e++)}),!e):!1}function f(i){i&&a([document.documentElement,document.body]).animate({scrollTop:a(i).offset().top},500)}a(".aia__action_clear").length&&a(document).on("click",".aia__action_clear",function(){const i=a(this).closest(".aia__content");a(i).find(".aia__response").empty(),a(i).find(".aia__error").empty()});const o=a(".aia__action_copy");o.length&&a(document).on("click",".aia__action_copy",function(){const i=a(this).closest(".aia__content").find(".aia__response");if(!i||!a(i).html())return!1;u(a(i).html()),a(o).addClass("active"),a(o).append("<span>Copied!</span>"),setTimeout(function(){a(o).removeClass("active")},1500),setTimeout(function(){a(o).find("span").remove()},2e3)});function u(i){if(!i)return;let e=a("<input>");a("body").append(e),e.val(i).select(),document.execCommand("copy"),e.remove()}})})(jQuery);
